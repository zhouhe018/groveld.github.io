<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#1e88e5"><meta name="msapplication-navbutton-color" content="#1e88e5"><meta name="apple-mobile-web-app-status-bar-style" content="#1e88e5"><meta name="description" content="The personal website of Martin Groeneveld"><meta name="author" content="Martin Groeneveld"><link rel="alternate" title="Groveld Technologies" href="/atom.xml"><title>TeamSpeak 3 server on Debian/Ubuntu</title><link rel="author" href="https://plus.google.com/u/0/+MartinGroeneveldGroveld"><link rel="publisher" href="https://plus.google.com/u/0/+MartinGroeneveldGroveld"><meta property="og:type" content="website"><meta property="og:site_name" content="Groveld Technologies"><meta property="og:url" content="http://groveld.com/articles/teamspeak-3-server-on-debian-ubuntu/"><meta property="og:image" content="/static/images/share.png"><meta property="og:title" content="TeamSpeak 3 server on Debian/Ubuntu"><meta property="og:description" content="The personal website of Martin Groeneveld"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@groveld"><meta name="twitter:url" content="http://groveld.com/articles/teamspeak-3-server-on-debian-ubuntu/"><meta name="twitter:image" content="/static/images/share.png"><meta name="twitter:title" content="TeamSpeak 3 server on Debian/Ubuntu"><meta name="twitter:description" content="The personal website of Martin Groeneveld"><link href='https://fonts.googleapis.com/css?family=Roboto:300,400' rel='stylesheet' type='text/css'><link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/static/css/98482765cc4b0f3dcd258628a729c4c253896b6b.css"><link rel="shortcut icon" href="/static/images/favicon.png"> <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script> <![endif]--><body><nav class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img src="/static/images/logo.svg" alt="logo"> </a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a><li class="active"><a href="/articles/">Articles</a><li><a href="/about/">About</a><li><a href="/contact/">Contact</a></ul></div></div></nav><header><div class="container"><h1>TeamSpeak 3 server on Debian/Ubuntu</h1></div></header><section class="content"><div class="container"><article><p>It has been a long time since my last post – I’m sorry for that but I didn’t have the time. Anyway I just installed TeamSpeak 3 on a Ubuntu 10.04 for a friend and want to share that info. Getting TeamSpeak running is mostly not the problem but you don’t want to start it after every boot by hand or run it as root. This Howto shows what I did. I assume that all user actions shown in this howto are performed as root or after executing sudo bash.<p>First you need to create a user under which the TeamSpeak server should run by executing following command:<div class="language-shell highlighter-rouge"><pre class="highlight"><code>adduser --disabled-login teamspeak
</code></pre></div><p>Now we need to get the software (64bit in my case) <em>(Take a look if a new version is out when you install your server)</em><div class="language-shell highlighter-rouge"><pre class="highlight"><code>wget http://ftp.4players.de/pub/hosted/ts3/releases/beta-22/teamspeak3-server_linux-amd64-3.0.0-beta22.tar.gz
</code></pre></div><p>and extract it<div class="language-shell highlighter-rouge"><pre class="highlight"><code>tar xzf teamspeak3-server_linux-amd64-3.0.0-beta22.tar.gz
</code></pre></div><p>We move it to a nice place with<div class="language-shell highlighter-rouge"><pre class="highlight"><code>mv teamspeak3-server_linux-amd64 /opt/ts3
</code></pre></div><p>and give it to the user teamspeak<div class="language-shell highlighter-rouge"><pre class="highlight"><code>chown -R teamspeak /opt/ts3
</code></pre></div><p>If you take a look into the /opt/ts3 directory you’ll see that there is a already a start/stop script (ts3server_startscript.sh), we will utilize it. Create a init.d file with pasting the content after executing <code class="highlighter-rouge">cat &gt; /etc/init.d/teamspeak</code> :<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c">#! /bin/sh</span>
<span class="c">### BEGIN INIT INFO</span>
<span class="c"># Provides:          teamspeak</span>
<span class="c"># Required-Start:    networking</span>
<span class="c"># Required-Stop:</span>
<span class="c"># Default-Start:     2 3 4 5</span>
<span class="c"># Default-Stop:      S 0 1 6</span>
<span class="c"># Short-Description: TeamSpeak Server Daemon</span>
<span class="c"># Description:       Starts/Stops/Restarts the TeamSpeak Server Daemon</span>
<span class="c">### END INIT INFO</span>

<span class="nb">set</span> -e

<span class="nv">PATH</span><span class="o">=</span>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
<span class="nv">DESC</span><span class="o">=</span><span class="s2">"TeamSpeak Server"</span>
<span class="nv">NAME</span><span class="o">=</span>teamspeak
<span class="nv">USER</span><span class="o">=</span>teamspeak
<span class="nv">DIR</span><span class="o">=</span>/opt/ts3
<span class="nv">DAEMON</span><span class="o">=</span><span class="nv">$DIR</span>/ts3server_startscript.sh
<span class="c">#PIDFILE=/var/run/$NAME.pid</span>
<span class="nv">SCRIPTNAME</span><span class="o">=</span>/etc/init.d/<span class="nv">$NAME</span>

<span class="c"># Gracefully exit if the package has been removed.</span>
<span class="nb">test</span> -x <span class="nv">$DAEMON</span> <span class="o">||</span> <span class="nb">exit </span>0

<span class="nb">cd</span> <span class="nv">$DIR</span>
sudo -u teamspeak ./ts3server_startscript.sh <span class="nv">$1</span>
</code></pre></div><p>Now press ENTER and CTRL-D and you’ve inserted the content into the file. Set the permission correctly with<div class="language-shell highlighter-rouge"><pre class="highlight"><code>chmod 755 /etc/init.d/teamspeak
</code></pre></div><p>and now you can try it out by calling<div class="language-shell highlighter-rouge"><pre class="highlight"><code>/etc/init.d/teamspeak start
</code></pre></div><p>Take note of the login and token as you will need them later. You can also look for them in the log files in /opt/ts3/logs/. The last thing you need to do now is to make sure the init script is executed at boot time by using following command:<div class="language-shell highlighter-rouge"><pre class="highlight"><code>update-rc.d teamspeak defaults
</code></pre></div><p>At last if you’ve a firewall running on your system you need to make sure that you open all your ports. To find out which ports are used by teamspeak use following command:<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># netstat -lnp | grep ts3</span>
tcp        0      0 0.0.0.0:10011           0.0.0.0:<span class="k">*</span>               LISTEN      30232/ts3server_lin
tcp        0      0 0.0.0.0:30033           0.0.0.0:<span class="k">*</span>               LISTEN      30232/ts3server_lin
udp        0      0 0.0.0.0:9987            0.0.0.0:<span class="k">*</span>                           30232/ts3server_lin
</code></pre></div><p>I hope this howto helped someone and write a comment if you found an error or a better way to do something. Now you just need to point your TeamSpeak client to the server and go to the menu entry “permissions -&gt; use token” and copy and past the token from above into the edit box. (only insert the chars behind “token=”)</article></div></section><footer><div class="container"><p class="text-center">Copyright &copy; 2016 Groveld Technologies &bull; <a href="/terms/">Terms</a> &bull; <a href="/privacy/">Privacy</a></div></footer><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-47976921-1', 'auto'); ga('send', 'pageview'); </script> <script type="text/javascript" src="/static/js/98482765cc4b0f3dcd258628a729c4c253896b6b.js"></script>
