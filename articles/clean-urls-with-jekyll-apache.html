<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
  <meta name="format-detection" content="telephone=no">

  <link rel="dns-prefetch" href="//code.jquery.com">
  <link rel="dns-prefetch" href="//fonts.googleapis.com">

  <link rel="shortcut icon" href="/favicon.ico">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#2b5797">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <meta name="msapplication-TileColor" content="#2b5797">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Groveld">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#f00">

  <meta name="description" content="The personal website of Martin Groeneveld">
  <meta name="author" content="groveld">
  <link rel="alternate" type="application/atom+xml" title="Martin Groeneveld" href="/atom.xml">
  <link rel="canonical" href="https://www.groveld.com/articles/clean-urls-with-jekyll-apache">
  <title>Clean URLs with Jekyll/Apache - Martin Groeneveld</title>
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/main.04dd626.css">
</head>
<body>
  
<nav class="navbar fixed-top navbar-expand-lg navbar-light d-print-none">

  <span class="navbar-brand mb-0 font-weight-bold">
    <a class="d-inline-block mr-1" href="/">
      <img src="/images/logo.svg" width="30" height="30" class="d-inline-block align-top" alt="logo">
    </a>
    Martin Groeneveld
  </span>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbar">
    <div class="navbar-nav ml-auto small font-weight-bold">
      <a class="nav-item nav-link" href="/terms">Terms</a>
      <a class="nav-item nav-link" href="/privacy">Privacy</a>
      <a class="nav-item nav-link active" href="/">Articles</a>
      <a class="nav-item nav-link" href="/about">About</a>
    </div>
  </div>

  <progress id="reading-progress" class="progress" value="0" max="100">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>

</nav>


<main>

  <div class="container-fluid mb-3 mb-lg-5">
    <div class="row">
      <div class="col">

        
        <header>
          <div class="container-fluid text-center py-3 py-lg-5">
            <h1 class="m-0">Clean URLs with Jekyll/Apache</h1>
            <p class="text-muted m-0">February 1, 2014 - groveld</p>
          </div>
        </header>
        

        <p>Yesterday I decided to shorten and clear the urls of my posts once and for all. By clean, I mean short and simple urls without dates, categories or anything else in them, only the post slug. My definition of cleanness also includes <strong>not</strong> having a slash at the end of the urls. For example, <code class="highlighter-rouge">groveld.com/about</code>.</p>

<p>To view options available when setting the permalink structure of posts in jekyll, you can take a look at the <a href="http://jekyllrb.com/docs/permalinks/">documentation</a>, but for our purpose, it’s so simple and you might have already guessed it without looking at the docs: <code class="highlighter-rouge">permalink: /:title</code></p>

<p>You have to put the above line in the <code class="highlighter-rouge">_config.yml</code> file in the root directory of your jekyll project.</p>

<p>If you have pagination, the permalink for the pagination could be as simple as <code class="highlighter-rouge">paginate_path: "page/:num"</code></p>

<p>Now the tricky and more exciting part, which is telling apache to remove the trailing slashes! Here’s how I did it, with this htaccess configuartion:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Options -Multiviews +FollowSymLinks
RewriteEngine On
RewriteBase /
DirectorySlash Off

# remove the trailing slash
RewriteRule ^(.*)\/(\?.*)?$ $1$2 [R=301,L]

# rewrite /dir/file to /dir/file/index.html
RewriteRule ^([\w\/-]+)(\?.*)?$ $1/index.html$2 [L,T=application/x-httpd-html]
</code></pre></div></div>

<div class="alert alert-warning" role="alert"><strong>Disclaimer:</strong> By no means I'm an expert in writing .htaccess files! But, it's working as I expect it to do. Note that it also passes the queries (if there are any).</div>

<p>We’re done! but there’s one more thing I’d like to mention:</p>

<p>In this approach, jekyll creates a directory for each post, which in my opinion is not very nice. The solution for that will be to tell jekyll to create all posts as html files in some directory, like <code class="highlighter-rouge">blog</code> and then have Apache load the actual file for each post from the <code class="highlighter-rouge">blog</code> folder. However, if you try this, you’ll realize that jekyll always creates the paginations in folder structure (<code class="highlighter-rouge">/page/2/index.html</code>) and there’s no easy way to make it create html files (<code class="highlighter-rouge">/page/2.html</code>), and therefore that’ll messup our htaccess url rewrite. Now, if you have a decent knowledge of <a href="http://regex.learncodethehardway.org/">regex</a>, then you’re fine and you can separate blog posts from paginations, but that’s not the case for me :p, so this is as far as I will go.</p>

<p>I also thought it might be useful to link to <a href="http://andrewho.co.uk/weblog/clean-urls-on-jekyll-apache">this article</a>; although I didn’t use it myself and I only found it after doing what I just described in this post.</p>


      </div>
    </div>
  </div>

  <!-- <div class="post-nav">
    
      <a class="prev-post" href="/articles/what-it-really-means-to-hack">&laquo; What it really means to Hack</a>
    
    
      <a class="next-post" href="/articles/postfix-with-mysql-backend-and-tls">Postfix with MySQL backend and TLS &raquo;</a>
    
  </div> -->

</main>


  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="/js/main.04dd626.js"></script>
</body>
</html>
