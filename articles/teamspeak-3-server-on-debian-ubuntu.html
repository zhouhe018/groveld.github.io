<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- meta info -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="format-detection" content="telephone=no">
    <!-- favicon and webapp behaviour -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#343a40">
    <!-- <meta name="msapplication-config" content="/browserconfig.xml"> -->
    <!-- <meta name="apple-mobile-web-app-capable" content="yes"> -->
    <!-- <meta name="apple-mobile-web-app-title" content="Groveld"> -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="/public/icons/apple/apple-touch-icon.png"> -->
    <!-- <link rel="mask-icon" href="/public/icons/apple/safari-pinned-tab.svg" color="#343a40"> -->
    <!-- site info -->
    <meta name="description" content="The personal website of Martin Groeneveld">
    <meta name="author" content="groveld">
    <link rel="alternate" type="application/atom+xml" title="Martin Groeneveld" href="/atom.xml">
    <link rel="canonical" href="https://www.groveld.com/articles/teamspeak-3-server-on-debian-ubuntu">
    <title>TeamSpeak 3 server on Debian/Ubuntu - Martin Groeneveld</title>
    <!-- Bootstrap CSS, Custom CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/app.css">
  </head>
  <body>
    
<nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark mb-2">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      <img src="/static/images/logo.png" width="30" height="30" class="d-inline-block align-top mr-1" alt="logo">
      Martin Groeneveld
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar">
      <div class="navbar-nav ml-auto">
        <a class="nav-item nav-link active" href="/blog">Blog</a>
        <a class="nav-item nav-link" href="/about">About</a>
        <a class="nav-item nav-link" href="/contact">Contact</a>
      </div>
    </div>
  </div>
</nav>


    <!-- Modal TOC -->
<div class="modal fade" id="modalTOC" tabindex="-1" role="dialog" aria-labelledby="modalTOC" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Contents</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
      </div>
    </div>
  </div>
</div>


<div class="container-fluid">

  <div class="row">
    <div class="col">
      <div class="card my-3">
        <div class="card-body">
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalTOC">
            Content
          </button>

          <h1 class="card-title">TeamSpeak 3 server on Debian/Ubuntu</h1>
          <p>It has been a long time since my last post – I’m sorry for that but I didn’t have the time. Anyway I just installed TeamSpeak 3 on a Ubuntu 10.04 for a friend and want to share that info. Getting TeamSpeak running is mostly not the problem but you don’t want to start it after every boot by hand or run it as root. This Howto shows what I did. I assume that all user actions shown in this howto are performed as root or after executing sudo bash.</p>

<p>First you need to create a user under which the TeamSpeak server should run by executing following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>adduser <span class="nt">--disabled-login</span> teamspeak
</code></pre></div></div>

<p>Now we need to get the software (64bit in my case)
<em>(Take a look if a new version is out when you install your server)</em></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://ftp.4players.de/pub/hosted/ts3/releases/beta-22/teamspeak3-server_linux-amd64-3.0.0-beta22.tar.gz
</code></pre></div></div>

<p>and extract it</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar </span>xzf teamspeak3-server_linux-amd64-3.0.0-beta22.tar.gz
</code></pre></div></div>

<p>We move it to a nice place with</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mv </span>teamspeak3-server_linux-amd64 /opt/ts3
</code></pre></div></div>

<p>and give it to the user teamspeak</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chown</span> <span class="nt">-R</span> teamspeak /opt/ts3
</code></pre></div></div>

<p>If you take a look into the /opt/ts3 directory you’ll see that there is a already a start/stop script (ts3server_startscript.sh), we will utilize it. Create a init.d file with pasting the content after executing <code class="highlighter-rouge">cat &gt; /etc/init.d/teamspeak</code> :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#! /bin/sh</span>
<span class="c">### BEGIN INIT INFO</span>
<span class="c"># Provides:          teamspeak</span>
<span class="c"># Required-Start:    networking</span>
<span class="c"># Required-Stop:</span>
<span class="c"># Default-Start:     2 3 4 5</span>
<span class="c"># Default-Stop:      S 0 1 6</span>
<span class="c"># Short-Description: TeamSpeak Server Daemon</span>
<span class="c"># Description:       Starts/Stops/Restarts the TeamSpeak Server Daemon</span>
<span class="c">### END INIT INFO</span>

<span class="nb">set</span> <span class="nt">-e</span>

<span class="nv">PATH</span><span class="o">=</span>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
<span class="nv">DESC</span><span class="o">=</span><span class="s2">"TeamSpeak Server"</span>
<span class="nv">NAME</span><span class="o">=</span>teamspeak
<span class="nv">USER</span><span class="o">=</span>teamspeak
<span class="nv">DIR</span><span class="o">=</span>/opt/ts3
<span class="nv">DAEMON</span><span class="o">=</span><span class="nv">$DIR</span>/ts3server_startscript.sh
<span class="c">#PIDFILE=/var/run/$NAME.pid</span>
<span class="nv">SCRIPTNAME</span><span class="o">=</span>/etc/init.d/<span class="nv">$NAME</span>

<span class="c"># Gracefully exit if the package has been removed.</span>
<span class="nb">test</span> <span class="nt">-x</span> <span class="nv">$DAEMON</span> <span class="o">||</span> <span class="nb">exit </span>0

<span class="nb">cd</span> <span class="nv">$DIR</span>
<span class="nb">sudo</span> <span class="nt">-u</span> teamspeak ./ts3server_startscript.sh <span class="nv">$1</span>
</code></pre></div></div>

<p>Now press ENTER and CTRL-D and you’ve inserted the content into the file. Set the permission correctly with</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>755 /etc/init.d/teamspeak
</code></pre></div></div>

<p>and now you can try it out by calling</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/etc/init.d/teamspeak start
</code></pre></div></div>

<p>Take note of the login and token as you will need them later. You can also look for them in the log files in /opt/ts3/logs/. The last thing you need to do now is to make sure the init script is executed at boot time by using following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update-rc.d teamspeak defaults
</code></pre></div></div>

<p>At last if you’ve a firewall running on your system you need to make sure that you open all your ports. To find out which ports are used by teamspeak use following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># netstat -lnp | grep ts3</span>
tcp        0      0 0.0.0.0:10011           0.0.0.0:<span class="k">*</span>               LISTEN      30232/ts3server_lin
tcp        0      0 0.0.0.0:30033           0.0.0.0:<span class="k">*</span>               LISTEN      30232/ts3server_lin
udp        0      0 0.0.0.0:9987            0.0.0.0:<span class="k">*</span>                           30232/ts3server_lin
</code></pre></div></div>

<p>I hope this howto helped someone and write a comment if you found an error or a better way to do something. Now you just need to point your TeamSpeak client to the server and go to the menu entry “permissions -&gt; use token” and copy and past the token from above into the edit box. (only insert the chars behind “token=”)</p>

        </div>
      </div>
    </div>
  </div>

  
  <div class="row">
    <div class="col">
      <button type="button" class="btn btn-primary btn-lg btn-block mb-3" id="show-comments">Show Comments</button>
      <div id="comments" class="card mb-3">
        <div class="card-body">
          <div id="disqus_thread"></div>
        </div>
      </div>
    </div>
  </div>
  

</div>


    <button type="button" class="btn btn-primary" id="scrollUp">Scroll to top</button>

    <footer class="container-fluid my-3">
      <div class="row">
        <div class="col">
          <div class="small text-center">
            &copy; 2018 Martin Groeneveld &bull; <a href="/legal/terms">Terms</a> &bull; <a href="/legal/privacy">Privacy</a> &bull; <a href="/legal/cookies">Cookies</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- jQuery first, then Popper.js, then Bootstrap JS, then custom scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/static/js/app.js"></script>
  </body>
</html>
