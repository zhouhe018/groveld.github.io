<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta name="format-detection" content="telephone=no"><link rel="apple-touch-icon" sizes="180x180" href="/static/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" href="/static/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/static/favicons/favicon-194x194.png" sizes="194x194"><link rel="icon" type="image/png" href="/static/favicons/android-chrome-192x192.png" sizes="192x192"><link rel="icon" type="image/png" href="/static/favicons/favicon-16x16.png" sizes="16x16"><link rel="manifest" href="/static/manifest.json"><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#000"><link rel="shortcut icon" href="/static/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Groveld"><meta name="application-name" content="Groveld"><meta name="msapplication-config" content="/static/browserconfig.xml"><meta name="theme-color" content="#000"><meta name="description" content="The personal website of Martin Groeneveld"><meta name="author" content="groveld"><link rel="alternate" title="Martin Groeneveld" href="/atom.xml"><link rel="canonical" href="https://www.groveld.com/articles/clean-urls-with-jekyll-apache/"><title>Clean URLs with Jekyll/Apache &bull; Martin Groeneveld</title><link rel="author" href="https://plus.google.com/u/0/+MartinGroeneveldGroveld"><link rel="publisher" href="https://plus.google.com/u/0/+MartinGroeneveldGroveld"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@groveld"><meta name="twitter:url" content="https://www.groveld.com/articles/clean-urls-with-jekyll-apache/"><meta name="twitter:image" content="/static/images/share.png"><meta name="twitter:title" content="Clean URLs with Jekyll/Apache"><meta name="twitter:description" content="The personal website of Martin Groeneveld"><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet"><link rel="stylesheet" href="/static/css/48a77cb4dbac4e979c2fc57d8b50ba926ed57e6d.css"> <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script> <![endif]--><body><nav class="navbar navbar-default navbar-fixed-top hidden-print"><div class="container"><div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Martin Groeneveld</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a><li><a href="/about/">About</a><li><a href="/contact/">Contact</a></ul></div></div></nav><section id="post"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> <img class="center-block img-circle img-responsive author hidden-print" src="https://avatars.githubusercontent.com/groveld" alt="author"><h1 class="post-title">Clean URLs with Jekyll/Apache</h1><h2 class="post-subtitle"><a href="https://github.com/groveld">groveld</a> on 01 Feb 2014 &bull; 2 min read</h2></div></div><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article><p>Yesterday I decided to shorten and clear the urls of my posts once and for all. By clean, I mean short and simple urls without dates, categories or anything else in them, only the post slug. My definition of cleanness also includes <strong>not</strong> having a slash at the end of the urls. For example, <code class="highlighter-rouge">groveld.com/about</code>.<p>To view options available when setting the permalink structure of posts in jekyll, you can take a look at the <a href="http://jekyllrb.com/docs/permalinks/">documentation</a>, but for our purpose, it’s so simple and you might have already guessed it without looking at the docs: <code class="highlighter-rouge">permalink: /:title</code><p>You have to put the above line in the <code class="highlighter-rouge">_config.yml</code> file in the root directory of your jekyll project.<p>If you have pagination, the permalink for the pagination could be as simple as <code class="highlighter-rouge">paginate_path: "page/:num"</code><p>Now the tricky and more exciting part, which is telling apache to remove the trailing slashes! Here’s how I did it, with this htaccess configuartion:<div class="highlighter-rouge"><pre class="highlight"><code>Options -Multiviews +FollowSymLinks
RewriteEngine On
RewriteBase /
DirectorySlash Off

# remove the trailing slash
RewriteRule ^(.*)\/(\?.*)?$ $1$2 [R=301,L]

# rewrite /dir/file to /dir/file/index.html
RewriteRule ^([\w\/-]+)(\?.*)?$ $1/index.html$2 [L,T=application/x-httpd-html]
</code></pre></div><div class="alert alert-warning" role="alert"><strong>Disclaimer:</strong> By no means I'm an expert in writing .htaccess files! But, it's working as I expect it to do. Note that it also passes the queries (if there are any).</div><p>We’re done! but there’s one more thing I’d like to mention:<p>In this approach, jekyll creates a directory for each post, which in my opinion is not very nice. The solution for that will be to tell jekyll to create all posts as html files in some directory, like <code class="highlighter-rouge">blog</code> and then have Apache load the actual file for each post from the <code class="highlighter-rouge">blog</code> folder. However, if you try this, you’ll realize that jekyll always creates the paginations in folder structure (<code class="highlighter-rouge">/page/2/index.html</code>) and there’s no easy way to make it create html files (<code class="highlighter-rouge">/page/2.html</code>), and therefore that’ll messup our htaccess url rewrite. Now, if you have a decent knowledge of <a href="http://regex.learncodethehardway.org/">regex</a>, then you’re fine and you can separate blog posts from paginations, but that’s not the case for me :p, so this is as far as I will go.<p>I also thought it might be useful to link to <a href="http://andrewho.co.uk/weblog/clean-urls-on-jekyll-apache">this article</a>; although I didn’t use it myself and I only found it after doing what I just described in this post.</article></div></div><div class="row hidden-print"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div id="share" class="btn-group btn-group-justified" role="group"> <a href="#" class="btn btn-pinterest" role="button"><span class="fa fa-pinterest-p"></span></a> <a href="#" class="btn btn-reddit" role="button"><span class="fa fa-reddit-alien"></span></a> <a href="#" class="btn btn-googleplus" role="button"><span class="fa fa-google-plus"></span></a> <a href="#" class="btn btn-linkedin" role="button"><span class="fa fa-linkedin"></span></a> <a href="#" class="btn btn-twitter" role="button"><span class="fa fa-twitter"></span></a> <a href="#" class="btn btn-facebook" role="button"><span class="fa fa-facebook"></span></a> <a href="#" class="btn btn-tumblr" role="button"><span class="fa fa-tumblr"></span></a> <a href="#" class="btn btn-print" role="button"><span class="fa fa-print"></span></a></div><ul class="pager"><li class="previous"><a href="/articles/what-it-really-means-to-hack/">&larr; Previous article</a><li class="next"><a href="/articles/postfix-with-mysql-backend-and-tls/">Next article &rarr;</a></ul></div></div></div></section><footer class="hidden-print"><div class="container"><p class="text-center">Copyright &copy; Martin Groeneveld 2016 &bull; <a href="/terms/">Terms</a> &bull; <a href="/privacy/">Privacy</a></div></footer><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-47976921-1', 'auto'); ga('send', 'pageview'); </script> <script type="text/javascript" src="/static/js/48a77cb4dbac4e979c2fc57d8b50ba926ed57e6d.js"></script>
